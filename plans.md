
---

### 🎯 전제 목표 (OKR)

* **Objective:** 첨부된 POI CSV 데이터를 활용하여, 키워드 검색 결과와 내부 그래프 구조(Node-Edge)를 시각적으로 확인하는 FastAPI 기반의 프로토타입 웹 애플리케이션을 구축한다.
* **Key Results:**
1. Neo4j Docker 환경 및 PEP 8 기반의 FastAPI 프로젝트 기본 구조 세팅 완료.
2. `관심지점분류설명.csv`와 `부산광역시.csv`를 파싱하여, $O(1)$ 네트워크 비용의 배치(Batch) 쿼리로 Neo4j에 노드와 엣지 적재.
3. 검색 API(`/search`) 및 그래프 순회 API(`/graph`) 구현.
4. tailwind를 사용. Vis.js를 연동한 단일 웹 페이지 UI 구축 및 통합 테스트 완료.

---

### 📋 단계별 개발 계획 (Development Plan)

단일 책임 원칙(SRP)에 입각하여 데이터베이스 연결, 비즈니스 로직, API 라우터, 프론트엔드를 명확히 분리하여 진행합니다.

#### Phase 1: 인프라 구성 및 도메인 분석

* **1-1. Neo4j 환경 구축:** `docker-compose.yml`을 작성하여 Neo4j 데이터베이스(APOC 플러그인 포함)를 컨테이너로 기동합니다.
* **1-2. Python 프로젝트 세팅:** `requirements.txt`에 `fastapi`, `uvicorn`, `neo4j`, `pydantic` 등 필수적이고 커뮤니티에서 검증된 라이브러리만 정의합니다. PEP 8 준수를 위해 `flake8`이나 `black` 같은 린터/포매터를 개발 환경에 세팅하는 것을 전제합니다.
* **1-3. CSV 데이터 매핑 전략 수립:**
* **Category 노드:** `관심지점분류설명.csv`의 '대분류~세세세분류' 및 '실제입력코드'를 활용하여 계층형 트리 생성.
* **Region 노드:** `부산광역시.csv`의 '지번 주소 명칭' 필드를 파싱하여 시/구/동 계층 노드 생성.
* **POI 노드:** '고유식별자 아이디', '관심지점 명칭'을 속성으로 갖는 노드를 생성하고, 카테고리(`HAS_CATEGORY`) 및 지역(`LOCATED_IN`) 엣지로 연결.



#### Phase 2: 데이터 적재 파이프라인 (Data Ingestion)

이 단계에서는 Python의 `csv` 모듈을 활용하여 데이터를 읽고 Neo4j에 적재하는 스크립트를 작성합니다.

* **2-1. 데이터베이스 커넥션 클래스:** `neo4j.GraphDatabase`를 래핑하여 세션 관리를 담당하는 클래스를 작성합니다. (SRP 적용)
* **2-2. 카테고리 데이터 적재 스크립트:** CSV를 읽어 파이썬 딕셔너리 리스트로 변환 후, Cypher의 `UNWIND` 구문을 사용하여 N개의 로우를 단 1번의 DB 호출로 적재합니다. (네트워크 성능 최적화)
* **2-3. POI 및 지역 데이터 적재 스크립트:** 위와 동일한 방식으로 부산광역시 데이터를 적재하며, 생성 시 `MERGE` 구문을 활용해 중복 생성을 방지합니다. 또한, 검색 속도 향상을 위해 텍스트 필드에 인덱스 생성을 포함합니다.

#### Phase 3: 검색 및 그래프 탐색 API 개발 (FastAPI)

* **3-1. 스키마 정의 (Pydantic):** 요청(Request) 파라미터와 응답(Response) JSON 구조를 검증하는 Pydantic 모델을 설계합니다.
* **3-2. 검색 API (`GET /api/search`):** 사용자가 입력한 키워드(예: "스타벅스", "사직동")를 기반으로 텍스트 매칭을 수행하여 일치하는 POI 노드 리스트를 반환합니다.
* **3-3. 그래프 순회 API (`GET /api/graph/{poi_id}`):** 특정 POI ID를 입력받아, 해당 노드와 연결된 카테고리, 지역 노드, 그리고 엣지들의 정보를 시각화 라이브러리가 요구하는 규격(Nodes, Edges 포맷)으로 반환하는 Cypher 쿼리(`MATCH (p:POI {id: $id})-[r]-(connected) ...`)를 실행합니다.

#### Phase 4: 프론트엔드 연동 및 통합 (Web UI)

* **4-1. 정적 파일 서빙 세팅:** FastAPI의 `StaticFiles`나 `Jinja2Templates`를 사용하여 단일 HTML 파일을 서빙하도록 라우터를 추가합니다.
* **4-2. UI 레이아웃 구현:** TailwindCSS를 활용하여 화면을 좌측(검색창 및 결과 리스트)과 우측(그래프 시각화 캔버스)으로 분할합니다.
* **4-3. Vis.js 연동 로직 (Vanilla JS):**
* 좌측 리스트에서 특정 POI 클릭 시 `fetch` API로 `/api/graph/{poi_id}` 호출.
* 응답받은 JSON 데이터로 우측의 Vis.js 네트워크 그리드를 업데이트하여, "내가 검색한 장소가 데이터베이스 내부에서 어떻게 연결되어 있는지" 시각적으로 증명합니다.

---
